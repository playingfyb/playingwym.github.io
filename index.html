<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fan Card — Final</title>
  <link href="https://fonts.googleapis.com/css2?family=PT+Serif:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&display=swap" rel="stylesheet">
  <style>
    :root {
      --card-w:768px;
      --card-h:1152px;
      --bg1:#120217;
      --bg2:#3b0058;
    }
    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      background: linear-gradient(180deg,#05050a,#071426);
      color: #fff;
      font-family: "PT Serif", serif;
      display:flex;
      gap:20px;
      align-items:flex-start;
      justify-content:center;
      padding:28px;
      min-height:100vh;
    }
    .controls {
      width:340px;
      background: rgba(255,255,255,0.03);
      border-radius:10px;
      padding:14px;
    }
    .controls h2 { margin:0 0 12px 0; font-size:18px; color:#cbd8e5; }
    label { display:block; font-size:13px; color:#c1d3e3; margin-top:10px; }
    input[type=text], select {
      width:100%;
      padding:10px;
      margin-top:8px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.06);
      background:#fff; color:#07121a; font-size:15px;
    }
    .row { display:flex; gap:8px; margin-top:12px; }
    button { padding:10px 12px; border-radius:8px; border:0; cursor:pointer; font-weight:700; }
    .btn-primary { background: linear-gradient(90deg,#ff7a18,#ff4e50); color:white; flex:1; }
    .btn-ghost { background:transparent; color:#c1d3e3; border:1px solid rgba(255,255,255,0.04); width:120px; }
    .hint { margin-top:10px; color:#9fb0c2; font-size:12px; }
    .preview { width:800px; max-width:calc(100vw - 420px); }
    .card-wrap {
      width:var(--card-w);
      height:var(--card-h);
      border-radius:20px;
      overflow:hidden;
      box-shadow:0 30px 80px rgba(0,0,0,0.7);
      background:#111;
    }
   .card {
  position: relative;
  width: 100%;
  height: 100%;
  background: linear-gradient(180deg, var(--bg1), var(--bg2));
  font-family: 'PT Serif', serif;
  color: white;
      border: 4px solid transparent;
  border-image: linear-gradient(45deg, #ff0077, #00eaff) 1;
  overflow: hidden; /* gradient ko bahar jaane se rokne ke liye */
}

/* Animated gradient overlay */
.card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    45deg,
    rgba(0, 255, 255, 0.15),
    rgba(255, 0, 255, 0.15),
    rgba(0, 255, 0, 0.15)
  );
  background-size: 400% 400%;
  animation: gradientMove 10s ease infinite;
  z-index: 0; /* sabse piche */
}

@keyframes gradientMove {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
    .card::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 80%;   /* logo ka size control */
  height: 80%;
  background: url('team_logo.png') no-repeat center;
  background-size: contain;
  opacity: 0.08; /* halka transparent */
  transform: translate(-50%, -50%);
  z-index: 1;
  pointer-events: none; /* click block na ho */
}


/* Card ke andar ka actual content overlay ke upar ho */
.card > * {
  position: relative;
  z-index: 1;
}

    /* Tournament Logo + Glow */
    .tournament-wrapper { position:absolute; top:20px; left:50%; transform:translateX(-50%); z-index:3; }
    .tournament-glow {
      position:absolute; top:50%; left:50%;
      width:240px; height:240px;
      transform:translate(-50%,-50%);
      background: radial-gradient(circle, rgba(122,60,255,0.35) 0%, rgba(0,191,255,0.25) 70%, transparent 100%);
      filter:blur(40px); border-radius:50%; z-index:1;
    }
   .tournament-logo {
  position: relative;
  height: 110px; /* or whatever size you want */
  filter: brightness(2) contrast(0.9) drop-shadow(0 0 8px #00ffcc) drop-shadow(0 0 16px #00ffcc);
  z-index: 2;
}
/* Tournament Logo + Glow */
.tournament-wrapper { 
  position:absolute; 
  top:20px; 
  left:50%; 
  transform:translateX(-50%); 
  z-index:3; 
}
.tournament-glow {
  position:absolute; 
  top:50%; 
  left:50%;
  width:240px; 
  height:240px;
  transform:translate(-50%,-50%);
  background: radial-gradient(circle, rgba(122,60,255,0.35) 0%, rgba(0,191,255,0.25) 70%, transparent 100%);
  filter:blur(40px); 
  border-radius:50%; 
  z-index:1;
}
.tournament-logo {
  position: relative;
  height: 110px; /* ya jo size tu chaahe */
  filter: brightness(2) contrast(0,9) drop-shadow(0 0 8px #00ffcc) drop-shadow(0 0 16px #00ffcc);
  z-index: 2;
}
.team-bg {
      position:absolute; inset:0;
      object-fit:cover;
      width:100%; height:100%;
      opacity:0.30;
  filter: drop-shadow(0 0 20px rgba(255,255,255,0.5));
 filter: brightness(1.2) contrast(1.5);
      z-index:0;
    }
   
    /* Role Image + Glow */
    .role-container {
      position:absolute; left:50%; top:38%;
      transform:translate(-50%, -38%);
      z-index:2;
    }
    .role-glow {
      position:absolute; top:50%; left:50%;
      width:600px; height:600px;
      transform:translate(-50%,-50%);
      background: radial-gradient(circle, rgba(122,60,255,0.4) 0%, rgba(0,191,255,0.2) 70%, transparent 100%);
      filter:blur(45px); border-radius:50%; z-index:1;
    }
   .role-img {
  position: relative;
  width: 560px;
  z-index: 2;

  /* Add integration effects */
  border: 3px solid rgba(255, 255, 255, 1.8); /* thin light border */
  border-radius: 12px; /* rounded corners */
  filter: drop-shadow(0 0 25px rgba(0, 0, 0, 2.8)); /* soft outer shadow */
}
/* Player Info */
.name {
  position:absolute; bottom:185px;
  width:100%; text-align:center;
  font-size:48px; font-weight:700; letter-spacing:1px;
  z-index:3;

  color: #fff;
  text-shadow: 0 0 10px rgba(0,255,255,0.8),
               0 0 20px rgba(0,255,255,0.6),
               0 0 30px rgba(0,255,255,0.4);

  /* Animation */
  animation: glowCyan 2s ease-in-out infinite alternate;
}

.divider {
  position: absolute;
  bottom: 180px;
  left: 50%;
  transform: translateX(-50%);
  width: 650px; /* keep or adjust as needed */
  height: 4px;
  background: rgba(255,255,255,0.9);
  z-index: 3;
}

.role-label {
  position:absolute; bottom:125px;
  width:100%; text-align:center;
  font-size:36px; font-weight:700;
  z-index:3;

  color: #fff;
  text-shadow: 0 0 8px rgba(255,0,255,0.8),
               0 0 16px rgba(255,0,255,0.6),
               0 0 24px rgba(255,0,255,0.4);

  /* Animation */
  animation: glowPink 2s ease-in-out infinite alternate;
}

/* Glow animations */
@keyframes glowCyan {
  from {
    text-shadow: 0 0 5px rgba(0,255,255,0.5),
                 0 0 10px rgba(0,255,255,0.4),
                 0 0 15px rgba(0,255,255,0.3);
  }
  to {
    text-shadow: 0 0 15px rgba(0,255,255,1),
                 0 0 30px rgba(0,255,255,0.8),
                 0 0 45px rgba(0,255,255,0.6);
  }
}

@keyframes glowPink {
  from {
    text-shadow: 0 0 5px rgba(255,0,255,0.5),
                 0 0 10px rgba(255,0,255,0.4),
                 0 0 15px rgba(255,0,255,0.3);
  }
  to {
    text-shadow: 0 0 15px rgba(255,0,255,1),
                 0 0 30px rgba(255,0,255,0.8),
                 0 0 45px rgba(255,0,255,0.6);
  }
}

    /* Organizer Name */
    .organizer {
      position:absolute; bottom:20px;
      width:100%; text-align:center;
      font-family:'Marcellus', serif;
      font-size:14px; letter-spacing:2px;
      color:#fff; z-index:3;
    }
    @media (max-width:1100px){
      body { padding:12px; flex-direction:column; align-items:center; gap:12px; }
      .controls{ width:92vw; }
      .preview{ width:92vw; }
      .card-wrap{ transform:scale(0.85); transform-origin:top center; }
    }
  </style>
</head>
<body>

  <div class="controls">
    <h2>Fan Card Controls</h2>
    <label>Player name</label>
    <input id="nameInput" type="text" placeholder="Player Name" value="AMARTYA">
    <label>Role (select)</label>
    <select id="roleSelect"><option>Loading roles…</option></select>
    <label>Team (select)</label>
    <select id="teamSelect"><option>Loading teams…</option></select>
    <div class="row">
      <button id="genBtn" class="btn-primary">Apply</button>
      <button id="dlBtn" class="btn-ghost">Download PNG</button>
    </div>
    <div class="hint">Images are loaded from your GitHub repo automatically.</div>
    <div class="status" id="status"></div>
  </div>

  <div class="preview">
    <div class="card-wrap">
      <div class="card">
      <div id="qr-code" style="position:absolute; bottom:20px; right:20px; z-index:5;"></div>
        <!-- Tournament logo -->
        <div class="tournament-wrapper">
          <div class="tournament-glow"></div>
          <img src="tournament.png" alt="Tournament Logo" class="tournament-logo" />
        </div>

        <!-- Team logo background -->
        <img id="teamBg" class="team-bg" src="">

        <!-- Role image -->
        <div class="role-container">
          <div class="role-glow"></div>
          <img id="roleImg" class="role-img" src="">
        </div>

        <!-- Name and Role -->
        <div id="nameText" class="name">PLAYER NAME</div>
        <div class="divider"></div>
        <div id="roleText" class="role-label">ROLE</div>

        <!-- Organizer -->
        <div class="organizer">UNIVERSAL GC</div>
      </div>
    </div>
  </div>

<script>
const OWNER = 'playingfyb';
const REPO = 'playingwym.github.io';
const ROLE_PATH = 'role_images';
const TEAM_PATH = 'team_logos/images';
const ROLE_NAME_MAP = {
  'role_1.png': 'IGL',
  'role_2.png': 'Support / Filter',
  'role_3.png': 'Entry Fragger',
  'role_4.png': 'AR',
  'role_5.png': 'Owner',
  'role_6.png': 'Waterboy',
  'role_7.png': 'Fan',
  'role_8.png': 'Cheer Girl' 
};
const roleSelect = document.getElementById('roleSelect');
const teamSelect = document.getElementById('teamSelect');
const nameInput = document.getElementById('nameInput');
const genBtn = document.getElementById('genBtn');
const dlBtn = document.getElementById('dlBtn');
const statusEl = document.getElementById('status');
const teamBg = document.getElementById('teamBg');
const roleImg = document.getElementById('roleImg');
const nameText = document.getElementById('nameText');
const roleText = document.getElementById('roleText');

async function githubList(path){
  const res = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents/${path}`);
  if(!res.ok) return [];
  const data = await res.json();
  return data.filter(f=>f.type==='file'&& /\.(png|jpg|jpeg|webp)$/i.test(f.name))
    .map(f=>({
      filename: f.name,
      url: f.download_url,
      clean: f.name.replace(/\.[^.]+$/,'').replace(/[_-]+/g,' ').replace(/\b\w/g,c=>c.toUpperCase())
    }));
}

function populate(sel, items, label){
  sel.innerHTML = '';
  const ph = document.createElement('option');
  ph.value = '';
  ph.textContent = label;
  sel.appendChild(ph);
  items.forEach(it=>{
    const o = document.createElement('option');
    o.value = it.url;
    o.textContent = ROLE_NAME_MAP[it.filename] || it.clean;
    o.dataset.filename = it.filename;
    sel.appendChild(o);
  });
}

async function init(){
  statusEl.textContent = 'Loading images…';
  const [roles, teams] = await Promise.all([
    githubList(ROLE_PATH),
    githubList(TEAM_PATH)
  ]);
  statusEl.textContent = '';
  populate(roleSelect, roles, 'Select role');
  populate(teamSelect, teams, 'Select team');
  applyPreview();
}

function applyPreview(){
  nameText.textContent = nameInput.value.trim().toUpperCase() || 'PLAYER NAME';
  const rsel = roleSelect.selectedIndex>0 ? roleSelect.options[roleSelect.selectedIndex] : null;
  if(rsel){
    roleImg.src = rsel.value;
    const fname = rsel.dataset.filename;
    roleText.textContent = ROLE_NAME_MAP[fname] || rsel.textContent;
  }
  const tsel = teamSelect.selectedIndex>0 ? teamSelect.options[teamSelect.selectedIndex] : null;
  teamBg.src = tsel ? tsel.value : '';
}

genBtn.addEventListener('click',e=>{ e.preventDefault(); applyPreview(); });
dlBtn.addEventListener('click',async e=>{
  e.preventDefault();
  statusEl.textContent = 'Preparing PNG...';
  const W=768,H=1152;
  const c=document.createElement('canvas');c.width=W;c.height=H;
  const ctx=c.getContext('2d');
  const grad=ctx.createLinearGradient(0,0,0,H);
  grad.addColorStop(0,'#3b0058');grad.addColorStop(1,'#8e00a8');
  ctx.fillStyle=grad;ctx.fillRect(0,0,W,H);
  ctx.globalAlpha=0.35;
  if(teamBg.src){
    const img=await loadImage(teamBg.src);
    ctx.drawImage(img,0,0,W,H);
  }
  ctx.globalAlpha=1;
  if(roleImg.src){
    const img=await loadImage(roleImg.src);
    const scale=Math.min(W*0.62/img.width, H*0.48/img.height, 1);
    const dw=img.width*scale, dh=img.height*scale;
    ctx.drawImage(img,(W-dw)/2,H*0.5-dh/2,dw,dh);
  }
  ctx.fillStyle='white';ctx.font='800 36px PT Serif';ctx.textAlign='center';
  ctx.fillText(nameText.textContent,W/2,H*0.8);
  ctx.font='700 24px PT Serif';ctx.fillText(roleText.textContent,W/2,H*0.84);
  const a=document.createElement('a');a.href=c.toDataURL();a.download='fan_card.png';
  document.body.appendChild(a);a.click();a.remove();
  statusEl.textContent='';
});

function loadImage(src){return new Promise(r=>{const i=new Image();i.crossOrigin='anonymous';i.onload=()=>r(i);i.src=src;});}
nameInput.addEventListener('input',applyPreview);
roleSelect.addEventListener('change',applyPreview);
teamSelect.addEventListener('change',applyPreview);


init();
  <!-- html2canvas library -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
document.getElementById('dlBtn').addEventListener('click', () => {
  const card = document.querySelector('.card');
  
  html2canvas(card, {
    scale: 3, // High quality
    width: card.offsetWidth,
    height: card.offsetHeight,
    backgroundColor: null // Transparent background maintain karega
  }).then(canvas => {
    const link = document.createElement('a');
    link.download = 'fan_card.png';
    link.href = canvas.toDataURL('image/png');
    link.click();
  });
});


</script>
</body>
</html>
